# üöÄ NGINX Forward Proxy –¥–ª—è –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫

–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä –Ω–∞ –±–∞–∑–µ NGINX —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π HTTP CONNECT —Ç—É–Ω–Ω–µ–ª–µ–π –¥–ª—è –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É –∫–æ–Ω—Ç–µ–Ω—Ç—É, –≤–∫–ª—é—á–∞—è YouTube.

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üîí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: Rate limiting, connection limits, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –æ–ø–∞—Å–Ω—ã—Ö –ø—É—Ç–µ–π
- ‚ö° **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è NGINX —Å –ª—É—á—à–∏–º–∏ –ø—Ä–∞–∫—Ç–∏–∫–∞–º–∏
- üåê **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ HTTP –∏ HTTPS —á–µ—Ä–µ–∑ CONNECT —Ç—É–Ω–Ω–µ–ª–∏
- üõ°Ô∏è **–ó–∞—â–∏—Ç–∞**: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º –∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω—ã–º —Ä–µ—Å—É—Ä—Å–∞–º
- üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ health check endpoint

## üö¢ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ –Ω–∞ Railway

1. **–î–µ–ø–ª–æ–π –ø—Ä–æ–µ–∫—Ç–∞**:
   ```bash
   git add .
   git commit -m "Add NGINX forward proxy for bypassing blocks"
   git push railway main
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Railway**:
   - `PORT`: `8080` (–ø–æ—Ä—Ç Railway)
   - `PROXY_AUTH_ENABLED`: `false` (–¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞)
   - `ALLOWED_IPS`: `0.0.0.0/0` (—Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤—Å–µ IP)
   - `RATE_LIMIT`: `1000` (–∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É)
   - `TIMEOUT`: `30s`

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∫—Å–∏

### –ü–æ–ª—É—á–µ–Ω–∏–µ URL —Å–µ—Ä–≤–∏—Å–∞
–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –≤ Railway –ø–æ–ª—É—á–∏—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä: `your-proxy.railway.app`)

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

#### Firefox
1. –û—Ç–∫—Ä–æ–π—Ç–µ `about:config`
2. –ù–∞–π–¥–∏—Ç–µ `network.proxy.http` –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤–∞—à–µ–≥–æ –ø—Ä–æ–∫—Å–∏ —Å–µ—Ä–≤–µ—Ä–∞
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `network.proxy.http_port` –≤ `8080`
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `network.proxy.ssl` –∏ `network.proxy.ssl_port` –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ
5. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `network.proxy.type` –≤ `1`

#### Chrome/Chromium
–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ: [Proxy SwitchyOmega](https://chrome.google.com/webstore/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif)

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

#### Android
1. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –°–µ—Ç—å –∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç ‚Üí Wi-Fi
2. –í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ç—å ‚Üí –ò–∑–º–µ–Ω–∏—Ç—å —Å–µ—Ç—å ‚Üí –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
3. –¢–∏–ø –ø—Ä–æ–∫—Å–∏: –†—É—á–Ω–æ–π
4. –ò–º—è —Ö–æ—Å—Ç–∞ –ø—Ä–æ–∫—Å–∏: –≤–∞—à Railway –¥–æ–º–µ–Ω
5. –ü–æ—Ä—Ç –ø—Ä–æ–∫—Å–∏: 8080

#### iOS
1. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí Wi-Fi
2. –í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ç—å ‚Üí –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–∫—Å–∏
3. –†—É—á–Ω–æ–π ‚Üí –°–µ—Ä–≤–µ—Ä: –≤–∞—à Railway –¥–æ–º–µ–Ω, –ü–æ—Ä—Ç: 8080

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å curl

```bash
# HTTP –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏
curl -x http://your-proxy.railway.app:8080 http://httpbin.org/get

# HTTPS –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏
curl -x http://your-proxy.railway.app:8080 -k https://httpbin.org/get

# YouTube —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏
curl -x http://your-proxy.railway.app:8080 -k https://www.youtube.com/watch?v=dQw4w9WgXcQ
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|----------------------|----------|
| `PORT` | `8080` | –ü–æ—Ä—Ç –¥–ª—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è |
| `RATE_LIMIT` | `1000` | –ú–∞–∫—Å–∏–º—É–º –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É |
| `TIMEOUT` | `30s` | –¢–∞–π–º–∞—É—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è |
| `ALLOWED_IPS` | `0.0.0.0/0` | –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ IP –∞–¥—Ä–µ—Å–∞ |

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- **Health check**: `GET https://your-proxy.railway.app/health`
- **–õ–æ–≥–∏**: –î–æ—Å—Ç—É–ø–Ω—ã –≤ Railway dashboard

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –º–µ—Ä –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

- **Rate Limiting**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
- **Connection Limits**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –Ω–∞ IP
- **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –æ–ø–∞—Å–Ω—ã—Ö –ø—É—Ç–µ–π**: –ó–∞–ø—Ä–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ localhost, –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º —Å–µ—Ç—è–º
- **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏**: HSTS, CSP, X-Frame-Options –∏ –¥—Ä.
- **–°–∫—Ä—ã—Ç–∏–µ –≤–µ—Ä—Å–∏–∏ —Å–µ—Ä–≤–µ—Ä–∞**: –£–¥–∞–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–µ—Ä–≤–µ—Ä–µ –∏–∑ –æ—Ç–≤–µ—Ç–æ–≤

## üåê –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã

- ‚úÖ HTTP (–ø–æ—Ä—Ç 80)
- ‚úÖ HTTPS (–ø–æ—Ä—Ç 443 —á–µ—Ä–µ–∑ CONNECT —Ç—É–Ω–Ω–µ–ª—å)
- ‚ùå SOCKS –ø—Ä–æ—Ç–æ–∫–æ–ª—ã (—Ç—Ä–µ–±—É—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)

## üö® –í–∞–∂–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

‚ö†Ô∏è **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –ª–µ–≥–∞–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π**
‚ö†Ô∏è **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –Ω–∞—Ä—É—à–µ–Ω–∏—è –∑–∞–∫–æ–Ω–æ–≤ –≤–∞—à–µ–π —Å—Ç—Ä–∞–Ω—ã**
‚ö†Ô∏è **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–∞—à–µ–≥–æ —Ç–∞—Ä–∏—Ñ–Ω–æ–≥–æ –ø–ª–∞–Ω–∞ Railway**
‚ö†Ô∏è **–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ Railway –∏–º–µ–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ —Ç—Ä–∞—Ñ–∏–∫—É**

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –í–µ—Ä—Å–∏—è |
|-----------|--------|
| –ë–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑ | dominikbechstein/nginx-forward-proxy:latest |
| NGINX –º–æ–¥—É–ª—å | ngx_http_proxy_connect_module |
| –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ | Alpine Linux |

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ [dominikbechstein/nginx-forward-proxy](https://github.com/dominikbechstein/nginx-forward-proxy) —Å —É–ª—É—á—à–µ–Ω–∏—è–º–∏ –¥–ª—è production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–∞ Railway.
